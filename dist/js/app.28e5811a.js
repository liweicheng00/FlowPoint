(function(t){function e(e){for(var o,r,a=e[0],c=e[1],l=e[2],u=0,h=[];u<a.length;u++)r=a[u],Object.prototype.hasOwnProperty.call(i,r)&&i[r]&&h.push(i[r][0]),i[r]=0;for(o in c)Object.prototype.hasOwnProperty.call(c,o)&&(t[o]=c[o]);d&&d(e);while(h.length)h.shift()();return s.push.apply(s,l||[]),n()}function n(){for(var t,e=0;e<s.length;e++){for(var n=s[e],o=!0,r=1;r<n.length;r++){var c=n[r];0!==i[c]&&(o=!1)}o&&(s.splice(e--,1),t=a(a.s=n[0]))}return t}var o={},i={app:0},s=[];function r(t){return a.p+"js/"+({about:"about"}[t]||t)+"."+{about:"6cd2e765"}[t]+".js"}function a(e){if(o[e])return o[e].exports;var n=o[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,a),n.l=!0,n.exports}a.e=function(t){var e=[],n=i[t];if(0!==n)if(n)e.push(n[2]);else{var o=new Promise((function(e,o){n=i[t]=[e,o]}));e.push(n[2]=o);var s,c=document.createElement("script");c.charset="utf-8",c.timeout=120,a.nc&&c.setAttribute("nonce",a.nc),c.src=r(t);var l=new Error;s=function(e){c.onerror=c.onload=null,clearTimeout(u);var n=i[t];if(0!==n){if(n){var o=e&&("load"===e.type?"missing":e.type),s=e&&e.target&&e.target.src;l.message="Loading chunk "+t+" failed.\n("+o+": "+s+")",l.name="ChunkLoadError",l.type=o,l.request=s,n[1](l)}i[t]=void 0}};var u=setTimeout((function(){s({type:"timeout",target:c})}),12e4);c.onerror=c.onload=s,document.head.appendChild(c)}return Promise.all(e)},a.m=t,a.c=o,a.d=function(t,e,n){a.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},a.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},a.t=function(t,e){if(1&e&&(t=a(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(a.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)a.d(n,o,function(e){return t[e]}.bind(null,o));return n},a.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return a.d(e,"a",e),e},a.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},a.p="/",a.oe=function(t){throw console.error(t),t};var c=window["webpackJsonp"]=window["webpackJsonp"]||[],l=c.push.bind(c);c.push=e,c=c.slice();for(var u=0;u<c.length;u++)e(c[u]);var d=l;s.push([0,"chunk-vendors"]),n()})({0:function(t,e,n){t.exports=n("56d7")},"14b6":function(t,e,n){t.exports=n.p+"img/flowchart.5007418a.png"},"214a":function(t,e,n){"use strict";var o=n("2427"),i=n.n(o);i.a},2427:function(t,e,n){},"27a5":function(t,e,n){},"29ad":function(t,e,n){},"2fe2":function(t,e,n){},"3f5a":function(t,e,n){"use strict";var o=n("dd7f"),i=n.n(o);i.a},"40d4":function(t,e,n){"use strict";var o=n("acc3"),i=n.n(o);i.a},4127:function(t,e,n){"use strict";var o=n("27a5"),i=n.n(o);i.a},"452c":function(t,e,n){},"48fe":function(t,e,n){},"51c0":function(t,e,n){"use strict";var o=n("e2f9"),i=n.n(o);i.a},"56d7":function(t,e,n){"use strict";n.r(e);n("e260"),n("e6cf"),n("cca6"),n("a79d");var o=n("2b0e"),i=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{attrs:{id:"app"}},[o("b-navbar",{attrs:{toggleable:"sm",type:"light",variant:"warning"}},[o("b-navbar-brand",{attrs:{href:"#",tag:"h1"}},[o("img",{staticClass:"icon-size",attrs:{src:n("14b6"),alt:"FlowPoint"}}),t._v(" FlowPoint ")]),o("b-navbar-toggle",{attrs:{target:"nav-collapse"}}),o("b-collapse",{attrs:{id:"nav-collapse","is-nav":""}},[o("b-navbar-nav",[o("b-nav-item",{attrs:{href:"#",to:"/"}},[t._v(" Flow ")]),o("b-nav-item",{attrs:{href:"#",to:"EditStyle"}},[t._v("Edit Module ")])],1),o("b-navbar-nav",{staticClass:"ml-auto"},[o("b-nav-item",[t.signed?o("div",[t._v("Wellcome "+t._s(t.basicProfile.tV)+"!")]):o("b-button",{directives:[{name:"b-modal",rawName:"v-b-modal",value:"login",expression:"'login'"}],attrs:{size:"sm"}},[t._v(" Login ")])],1),o("b-nav-item",[o("b-button",{attrs:{size:"sm"},on:{click:t.signOut}},[t._v("LogOut")])],1)],1)],1)],1),o("b-modal",{ref:"login",attrs:{id:"login",title:"Login","hide-footer":""}},[o("div",{staticClass:"login-content"},[o("GoogleLogin",{attrs:{params:t.params,renderParams:t.renderParams,onSuccess:t.onSuccess}},[t._v("Login")])],1)]),o("div",{staticClass:"view"},[o("router-view")],1),t._m(0)],1)},s=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[t._v(" Icons made by "),n("a",{attrs:{href:"https://www.flaticon.com/authors/freepik",title:"Freepik"}},[t._v("Freepik")]),t._v(" from "),n("a",{attrs:{href:"https://www.flaticon.com/",title:"Flaticon"}},[t._v("www.flaticon.com")])])}],r=(n("4de4"),n("4160"),n("caad"),n("13d5"),n("a434"),n("ac1f"),n("1276"),n("159b"),n("2f62")),a=n("d4ec"),c=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:20,n=t%e;return n>e/2?t+(e-n):t-n},l=c,u=function t(e,n,o,i){Object(a["a"])(this,t),this.type=e,this.props=n,this.event=o,this.mainPage=!1,w.commit("newID"),this.id=w.state.IdArray[w.state.IdArray.length-1],"block"==e?(this.arrows={start:[],end:[]},this.content="",this.props={mouseclickposition:[l(o.offsetX),l(o.offsetY)],styleObject:{},textObject:{}},this.childs=[],this.parent=i):"arrow"==e&&(this.position={},this.props={visable:!1,startX:null,startY:null,offsetX:null,offsetY:null,arrowstartMiddle:n.arrowstartMiddle,arrowendMiddle:null},n.arrowstartMiddle.arrows.start.push(this),this.childs=[],this.parent=null)},d=u,h=n("bc3a"),p=n.n(h),f=function(){return{blockStyles:[]}},m={defaultBlockStyles:function(t){return t.blockStyles}},v={getBlockStyles:function(t){var e=t.commit;p.a.get("api/styles").then((function(t){e("addStyles",t.data)})).catch((function(t){console.log(t)}))}},b={addStyles:function(t,e){t.blockStyles=e}},g={namespaced:!0,state:f,getters:m,actions:v,mutations:b};o["default"].use(r["a"]);var w=new r["a"].Store({modules:{styles:g},strict:"debug",state:{svg:null,ctm:null,ictm:null,IdArray:[],initViewbox:[0,0],FocusingElementId:null,alldata:{id:"1",type:"block",position:{},props:{},childs:[],mainPage:!0,parent:null,arrows:{start:[],end:[]},content:""},self:{},arrowObject:null,NumOfChilds:[0],coor:[]},getters:{},mutations:{getSVG:function(t,e){t.svg=e},clearSVG:function(t){t.svg=null},setCTM:function(t){t.ctm=t.svg.svg.getCTM(),t.ictm=t.ctm.inverse()},setInitViewbox:function(t,e){t.initViewbox=e},assignBeginingNode:function(t){t.self=t.alldata},changeSelf:function(t,e){t.self.mainPage=!1,t.self=e,t.self.mainPage=!0},gobackSelf:function(t){console.log("state.self go back"),t.self.mainPage=!1,t.self=t.self.parent,t.self.mainPage=!0},addElement:function(t,e){var n=e.type,o=e.props,i=e.event,s=e.parent,r=new d(n,o,i,s);t.self.childs.push(r),"arrow"==n&&(t.arrowObject=r)},clearInitPosition:function(t,e){var n=e.data,o=e.style;n.props.mouseclickposition=null,n.props.styleObject=o},setArrowPosition:function(t,e){t.arrowObject.props.visable=!0,t.arrowObject.props.offsetX=t.ictm.a*e.event.offsetX+t.ictm.c*e.event.offsetY+t.ictm.e,t.arrowObject.props.offsetY=t.ictm.b*e.event.offsetX+t.ictm.d*e.event.offsetY+t.ictm.f,e.props.arrowendMiddle?t.arrowObject.props.arrowendMiddle=e.props.arrowendMiddle:t.arrowObject.props.arrowendMiddle=null},endLink:function(t,e){t.arrowObject.props.visable=!0,t.arrowObject.props.arrowendMiddle=e,e?e.arrows.end.push(t.arrowObject):this._mutations.cancelLink[0](),t.arrowObject=null},cancelLink:function(t){console.log("cacel link"),t.self.childs.pop()},emptyState:function(){this.replaceState({IdArray:[],FocusingElementId:null,alldata:{id:"1",type:"block",position:{},props:{},childs:[],parent:null},self:{childs:[]},arrowObject:null})},newID:function(t){var e;if(0!=t.IdArray.length){var n=parseInt(t.IdArray[t.IdArray.length-1].split("_")[1]);e="cpn_"+(n+1),t.IdArray.push(e)}else e="cpn_0",t.IdArray.push(e)},changeFocusingElement:function(t,e){console.log("change focus",e),t.FocusingElementId=e},addChildNum:function(t,e){var n=e.parentCoor.reduce((function(t,e){return t[e]}),t.coor);n[e.pkey]||n.push([]),t.NumOfChilds[e.l]?t.NumOfChilds[e.l]+=1:t.NumOfChilds.push(1)},reduceChildNum:function(t,e){t.NumOfChilds[e]-=1,t.NumOfChilds[e]||t.NumOfChilds.splice(e,e)},editContent:function(t,e){var n=e.data,o=e.content;n.content=o},resetBlockHeight:function(t,e){var n=e.data,o=e.ref;n.props.styleObject.height=o.clientHeight},setBlockPosition:function(t,e){var n=e.data,o=e.position;n.arrows.start.forEach((function(t){t.props.offsetX+=1,t.props.offsetX-=1})),n.arrows.end.forEach((function(t){t.props.offsetX+=1,t.props.offsetX-=1})),n.props.styleObject.x="".concat(l(o.x)),n.props.styleObject.y="".concat(l(o.y))},deleteMiddle:function(t,e){var n=[];n.push(e.id),"block"==e.type&&(e.arrows.start.forEach((function(t){n.push(t.id)})),e.arrows.end.forEach((function(t){n.push(t.id)}))),console.log(n);var o=t.self.childs.filter((function(t){if(!n.includes(t.id))return t}));t.self.childs=o}},actions:{}}),y=n("2106"),k=n.n(y),x=n("e571"),O=n.n(x),$=n("5f5b"),j=n("b1e0"),M=(n("f9e3"),n("2dd8"),n("d06d"),n("0874"));o["default"].use(k.a,p.a);var E="422430406019-4knnkh10lgpftp3a7hhi3cd17ljdnat2.apps.googleusercontent.com";o["default"].use(x["LoaderPlugin"],{client_id:E}),o["default"].use($["a"]),o["default"].use(j["a"]),o["default"].component("v-icon",M["a"]),o["default"].prototype.$bus=new o["default"];var _={name:"app",components:{GoogleLogin:O.a},data:function(){return{signed:!1,basicProfile:null,params:{client_id:"422430406019-4knnkh10lgpftp3a7hhi3cd17ljdnat2.apps.googleusercontent.com"},renderParams:{width:250,height:50,longtitle:!0}}},store:w,mounted:function(){},methods:{onSuccess:function(t){var e=this;this.$refs["login"].hide(),this.basicProfile=t.getBasicProfile(),o["default"].GoogleAuth.then((function(t){e.signed=t.isSignedIn.get()}))},signOut:function(){var t=this;o["default"].GoogleAuth.then((function(e){e.signOut(),t.signed=e.isSignedIn.get()}))},isSigned:function(){var t=this;o["default"].GoogleAuth.then((function(e){t.signed=e.isSignedIn.get()}))}}},S=_,P=(n("4127"),n("b0a0"),n("2877")),B=Object(P["a"])(S,i,s,!1,null,null,null),I=B.exports,C=(n("d3b7"),n("8c4f")),L=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("b-container",{attrs:{fluid:""}},[n("b-form-row",[n("b-col",{attrs:{cols:"8"}},[n("Tool"),n("Main")],1),n("b-col",[n("All"),n("Preview"),n("Style"),n("TextEditor")],1)],1)],1)],1)},D=[],T=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"block"},[n("svg",{ref:"svg",staticClass:"Svg",attrs:{id:"block",version:"2",baseProfile:"full",xmlns:"http://www.w3.org/2000/svg",width:t.props.clientWidth,height:t.props.clientHeight,viewBox:t.viewBox,preserveAspectRatio:"xMidYMid slice"},on:{contextmenu:function(t){t.preventDefault()},click:t.clickEvent,dblclick:function(e){return e.target!==e.currentTarget?null:t.dblclickEvent(e)},mousedown:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"left",37,e.key,["Left","ArrowLeft"])||"button"in e&&0!==e.button?null:t.leftmousedownEvent(e)},mouseup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"left",37,e.key,["Left","ArrowLeft"])||"button"in e&&0!==e.button?null:t.leftmouseupEvent(e)},mousemove:t.mousemoveEvent,mouseleave:t.mouseleaveEvent,wheel:t.wheelEvent}},[n("g",t._l(t.childs,(function(e,o){return n("Middle",{key:o,attrs:{data:e,parent:t.self},on:{dblclick:t.middleDblClickEvent,"mousedown-right":t.middleMouseDownEvent,"mouseup-right":t.middleMouseUpEvent,"mouseup-left":t.middleMouseUpEventL,"mousedown-left":t.middleMouseDownEventL,mouseenter:t.middleMouseEnterEvent,mouseleave:t.middleMouseLeaveEvent}})})),1)])])},A=[],H=(n("99af"),n("3ca3"),n("ddb0"),n("2b3d"),function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("g",{ref:"g",class:t.classList,on:{mousedown:[function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"left",37,e.key,["Left","ArrowLeft"])||"button"in e&&0!==e.button?null:t.mousedownleft(e)},function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"right",39,e.key,["Right","ArrowRight"])||"button"in e&&2!==e.button?null:t.mousedownright(e)}],mouseup:[function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"left",37,e.key,["Left","ArrowLeft"])||"button"in e&&0!==e.button?null:t.mouseupleft(e)},function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"right",39,e.key,["Right","ArrowRight"])||"button"in e&&2!==e.button?null:t.mouseupright(e)}],dblclick:t.dblclick,mouseenter:t.mouseenter,mouseleave:t.mouseleave,keyup:[function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"delete",[8,46],e.key,["Backspace","Delete","Del"])?null:t.deleteKey(e)},function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.enterKey(e)}],focus:t.onFocus}},["block"==t.data.type?n("Block",{attrs:{data:t.data,parent:t.parent}}):"arrow"==t.data.type?n("Arrow",{attrs:{data:t.data}}):t._e()],1)}),F=[],N=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("g",[n("defs",[n("marker",{attrs:{id:"arrow",markerWidth:"10",markerHeight:"10",refX:"9",refY:"3",orient:"auto"}},[n("path",{attrs:{d:"M0,0 L0,6 L9,3 z",fill:"#f00"}})])]),n("path",{attrs:{d:t.d,stroke:"#000","stroke-width":"1","marker-end":"url(#arrow)"}})])},z=[],W={props:{data:Object},data:function(){return{startSection:1,endSection:3}},computed:{startPoint:function(){if(console.log("startPoint"),this.data.props.visable){if(this.data.props.arrowstartMiddle){var t,e=parseInt(this.data.props.arrowstartMiddle.props.styleObject.y)+parseInt(this.data.props.arrowstartMiddle.props.styleObject.height)/2;return t=this.data.props.offsetX>parseInt(this.data.props.arrowstartMiddle.props.styleObject.x)?parseInt(this.data.props.arrowstartMiddle.props.styleObject.x)+parseInt(this.data.props.arrowstartMiddle.props.styleObject.width):parseInt(this.data.props.arrowstartMiddle.props.styleObject.x),[t,e]}return console.warn("something wrong!"),[0,0]}return[0,0]},endPoint:function(){var t,e;return console.log("endPoint"),this.data.props.visable?this.data.props.arrowendMiddle?(t=this.data.props.arrowendMiddle.props.styleObject.x,e=parseInt(this.data.props.arrowendMiddle.props.styleObject.y)+parseInt(this.data.props.arrowendMiddle.props.styleObject.height)/2,[t,e]):(t=this.data.props.offsetX,e=this.data.props.offsetY,[t,e]):[0,0]},d:function(){var t=this.pathCalculate(this.data.props),e="".concat(t.x1,",").concat(t.y1),n="".concat(t.x2,",").concat(t.y2);return"M".concat(e," L").concat(n)}},methods:{setNodePosition:function(t,e,n){switch(n){case 1:return t[0]-e[0]<0?t[1]-e[1]>=0?4:2:1;case 2:return t[1]-e[1]>=0?t[0]-e[0]>=0?1:3:2;case 3:return t[0]-e[0]>=0?t[1]-e[1]>=0?4:2:3;case 4:return t[1]-e[1]<0?t[0]-e[0]>=0?1:3:4}},pathCalculate:function(t){var e;if(!t.visable)return{x1:0,y1:0,x2:0,y2:0};if(e={x1:parseInt(t.arrowstartMiddle.props.styleObject.x)+parseInt(t.arrowstartMiddle.props.styleObject.width),y1:parseInt(t.arrowstartMiddle.props.styleObject.y)+parseInt(t.arrowstartMiddle.props.styleObject.height)/2,x2:t.offsetX,y2:t.offsetY},t.arrowendMiddle)switch(e.x2=t.arrowendMiddle.props.styleObject.x,e.y2=t.arrowendMiddle.props.styleObject.y,this.endSection=this.setNodePosition([e.x1,e.y1],[e.x2,e.y2],this.endSection),this.endSection){case 1:e.x2=parseInt(t.arrowendMiddle.props.styleObject.x)+parseInt(t.arrowendMiddle.props.styleObject.width),e.y2=parseInt(t.arrowendMiddle.props.styleObject.y)+parseInt(t.arrowendMiddle.props.styleObject.height)/2;break;case 2:e.x2=parseInt(t.arrowendMiddle.props.styleObject.x)+parseInt(t.arrowendMiddle.props.styleObject.width)/2,e.y2=t.arrowendMiddle.props.styleObject.y;break;case 3:e.x2=t.arrowendMiddle.props.styleObject.x,e.y2=parseInt(t.arrowendMiddle.props.styleObject.y)+parseInt(t.arrowendMiddle.props.styleObject.height)/2;break;case 4:e.x2=parseInt(t.arrowendMiddle.props.styleObject.x)+parseInt(t.arrowendMiddle.props.styleObject.width)/2,e.y2=parseInt(t.arrowendMiddle.props.styleObject.y)+parseInt(t.arrowendMiddle.props.styleObject.height);break}switch(this.startSection=this.setNodePosition([e.x2,e.y2],[e.x1,e.y1],this.startSection),this.startSection){case 1:e.x1=parseInt(t.arrowstartMiddle.props.styleObject.x)+parseInt(t.arrowstartMiddle.props.styleObject.width),e.y1=parseInt(t.arrowstartMiddle.props.styleObject.y)+parseInt(t.arrowstartMiddle.props.styleObject.height)/2;break;case 2:e.x1=parseInt(t.arrowstartMiddle.props.styleObject.x)+parseInt(t.arrowstartMiddle.props.styleObject.width)/2,e.y1=parseInt(t.arrowstartMiddle.props.styleObject.y);break;case 3:e.x1=parseInt(t.arrowstartMiddle.props.styleObject.x),e.y1=parseInt(t.arrowstartMiddle.props.styleObject.y)+parseInt(t.arrowstartMiddle.props.styleObject.height)/2;break;case 4:e.x1=parseInt(t.arrowstartMiddle.props.styleObject.x)+parseInt(t.arrowstartMiddle.props.styleObject.width)/2,e.y1=parseInt(t.arrowstartMiddle.props.styleObject.y)+parseInt(t.arrowstartMiddle.props.styleObject.height);break}return e}}},X=W,V=Object(P["a"])(X,N,z,!1,null,"46623aef",null),Y=V.exports,G=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("g",[n("rect",t._b({staticClass:"block",attrs:{id:t.data.id}},"rect",t.data.props.styleObject,!1)),n("foreignObject",{attrs:{x:t.styleObject.x,y:t.styleObject.y,width:t.data.props.styleObject.width,height:t.data.props.styleObject.height,"pointer-events":"none"}},[n("body",{attrs:{xmlns:"http://www.w3.org/1999/xhtml"}},[n("div",{ref:"content",staticClass:"fo"},[n("div",{class:[t.fo_content],domProps:{innerHTML:t._s(t.data.content)}})])])])],1)},R=[],U=(n("b0c0"),{props:{data:Object,parent:Object},data:function(){return{ifFocus:!1,allowMove:!1,styleDefault:{width:"100",height:"30",stroke:"black",rx:"3",fill:"transparent","stroke-width":"1",x:"0",y:"0"},textDefault:{},fo_content:""}},created:function(){var t=this;this.$bus.$on("TextEditor:change",(function(e,n){console.log("get event"),t.ifFocus&&t.data.id==n&&(console.log("commit"),t.$store.commit("editContent",{data:t.data,content:e}))})),this.$bus.$on("Style:change",(function(e){t.ifFocus&&(t.fo_content=e.name)}))},updated:function(){""!=this.data.content&&this.$store.commit("resetBlockHeight",{data:this.data,ref:this.$refs.content})},watch:{focusingElementId:function(t){t==this.data.id?this.ifFocus=!0:this.ifFocus=!1},data:function(){console.log("here")}},computed:{styleObject:function(){if(this.data.props.mouseclickposition){var t=this.$store.state.ictm,e=this.data.props.mouseclickposition[0]-parseInt(this.styleDefault.width)/t.a/2,n=this.data.props.mouseclickposition[1]-parseInt(this.styleDefault.height)/t.a/2,o=t.a*e+t.c*n+t.e,i=t.b*e+t.d*n+t.f,s=Object.assign(this.styleDefault,{color:"red",x:"".concat(o),y:"".concat(i)});return this.$store.commit("clearInitPosition",{data:this.data,style:s}),s}return this.data.props.styleObject},textObject:function(){return Object.assign(this.textDefault,{})},focusingElementId:function(){return this.$store.state.FocusingElementId}},mounted:function(){},methods:{resizeBody:function(){console.log("here")},gridAttach:function(t,e){var n=t%e;return n>e/2?t+(e-n):t-n}},beforeDestroy:function(){this.$bus.$off("TextEditor:change")}}),q=U,K=(n("a47d"),Object(P["a"])(q,G,R,!1,null,"7ece9821",null)),J=K.exports,Q={components:{Arrow:Y,Block:J},props:{data:Object,parent:Object},mounted:function(){console.log(this.$refs),"block"==this.data.type&&this.$refs.g.focus()},created:function(){},computed:{classList:function(){var t={Middle:!0};return t[this.data.type]=!0,t}},methods:{mousedownright:function(t){this.$emit("mousedown-right",t,this.data)},mouseupright:function(t){this.$emit("mouseup-right",t,this.data)},mouseupleft:function(t){this.$emit("mouseup-left",t,this.data)},mousedownleft:function(t){this.$emit("mousedown-left",t,this.data)},mouseenter:function(t){this.$emit("mouseenter",t,this.data)},mouseleave:function(t){this.$emit("mouseleave",t,this.data)},dblclick:function(t){this.$emit("dblclick",t,this.data)},deleteKey:function(t){console.log(t),console.log(this.data),this.$store.commit("deleteMiddle",this.data)},enterKey:function(){this.$bus.$emit("Block:enter",this.data.content,this.data.id)},onFocus:function(t){console.log(t),this.$store.commit("changeFocusingElement",this.data.id),this.$bus.$emit("Block:focus",this.data.content,this.data.id)}},beforeDestroy:function(){}},Z=Q,tt=(n("c2d6"),Object(P["a"])(Z,H,F,!1,null,"32a09d08",null)),et=tt.exports,nt={components:{Middle:et},props:{},data:function(){return{canZoom:!1,canPen:!1,canDrag:!1,linkStatus:!1,props:{clientHeight:null,clientWidth:null,viewBox:{"min-x":0,"min-y":0,width:null,height:null,startPoint:[0,0]},arrowstartMiddle:null,arrowendMiddle:null}}},created:function(){var t=this;this.$nextTick((function(){t.$store.commit("getSVG",t.$refs),t.$store.commit("setCTM")})),this.$bus.$on("tool:back",(function(){t.backtoolclickEvent()})),this.$bus.$on("tool:save",(function(){console.log(t.$refs),t.savetoolclickEvent(t.$refs.svg)})),window.addEventListener("resize",(function(){t.windowresizeEvent()}))},mounted:function(){this.windowresizeEvent(),this.$store.commit("assignBeginingNode")},computed:{viewBox:{get:function(){return this.props.clientHeight?"".concat(this.props.viewBox["min-x"]," ").concat(this.props.viewBox["min-y"]," ").concat(this.props.viewBox.width," ").concat(this.props.viewBox.height):"0 0 0 0"},set:function(t){this.props.viewBox["min-x"]=t[0],this.props.viewBox["min-y"]=t[1]}},data:function(){return this.$store.state.alldata},self:function(){return this.$store.state.self},childs:function(){return this.self.childs},parent:function(){return this.self.parent}},watch:{},methods:{windowresizeEvent:function(){this.props.clientHeight=this.$el.clientHeight,this.props.clientWidth=this.$el.clientWidth,this.props.viewBox.height=this.props.clientHeight,this.props.viewBox.width=this.props.clientWidth,this.$store.commit("setInitViewbox",[this.props.clientWidth,this.props.clientHeight])},clickEvent:function(t){this.linkStatus&&this.endLink(t)},dblclickEvent:function(t){this.$store.commit("addElement",{type:"block",props:this.props,event:t,parent:this.self})},leftmousedownEvent:function(t){this.startPen(t)},leftmouseupEvent:function(t){this.endPen(t)},mousemoveEvent:function(t){t.preventDefault(),this.linkStatus?this.Link(t):this.canPen?this.pen(t):this.canDrag&&this.drag(t,this.dragData)},mouseleaveEvent:function(){},wheelEvent:function(t){this.zoom(t)},middleMouseDownEventL:function(t,e){this.startDrag(e)},middleMouseUpEventL:function(){this.endDrag()},middleMouseDownEvent:function(t,e){this.startLink(t,e)},middleMouseUpEvent:function(t,e){this.endLink(t,e)},middleDblClickEvent:function(t,e){this.initViewbox(),this.$store.commit("changeSelf",e)},middleMouseEnterEvent:function(t,e){if(this.linkStatus){var n=e.id!=this.props.arrowstartMiddle.id,o=t.target.classList.contains("block");n&&o&&(this.props.arrowendMiddle=e)}},middleMouseLeaveEvent:function(){if(this.linkStatus){var t=event.target.classList.contains("block");t&&(this.props.arrowendMiddle=null)}},backtoolclickEvent:function(){this.parent?(this.initViewbox(),this.$store.commit("gobackSelf")):console.log("no parent")},savetoolclickEvent:function(t,e){t.setAttribute("xmlns","http://www.w3.org/2000/svg");var n=t.outerHTML,o='<?xml version="1.0" standalone="no"?>\r\n',i=new Blob([o,n],{type:"image/svg+xml;charset=utf-8"}),s=URL.createObjectURL(i),r=document.createElement("a");r.href=s,r.download=e,document.body.appendChild(r),r.click(),document.body.removeChild(r)},initViewbox:function(){this.viewBox=[0,0]},startLink:function(t,e){var n=t.target.classList.contains("block");n&&(this.props.arrowstartMiddle||(this.linkStatus=!0,this.props.arrowstartMiddle=e))},endLink:function(){this.linkStatus=!1,this.$store.commit("endLink",this.props.arrowendMiddle),this.props.arrowstartMiddle=null,this.props.arrowendMiddle=null},Link:function(t){t.preventDefault(),this.$store.state.arrowObject?this.$store.commit("setArrowPosition",{event:t,props:this.props}):this.$store.commit("addElement",{type:"arrow",props:this.props,event:t})},startPen:function(t){var e=t.target.classList.contains("Svg");e&&(this.canPen=!0,this.props.viewBox.startPoint=[this.props.viewBox["min-x"]+t.offsetX,this.props.viewBox["min-y"]+t.offsetY])},endPen:function(){this.canPen=!1},pen:function(t){this.props.viewBox["min-x"]=this.props.viewBox.startPoint[0]-t.offsetX,this.props.viewBox["min-y"]=this.props.viewBox.startPoint[1]-t.offsetY,this.$store.commit("setCTM")},zoom:function(t){var e=this.props.viewBox.width+t.deltaY,n=this.props.viewBox.height+t.deltaY;this.props.viewBox.width=e>=0?e:0,this.props.viewBox.height=n>=0?n:0,this.$store.commit("setCTM")},startDrag:function(t){this.canDrag=!0,this.dragData=t},drag:function(t,e){if(this.canDrag){var n=this.$store.state.ictm,o=t.offsetX-parseInt(e.props.styleObject.width)/n.a/2,i=t.offsetY-parseInt(e.props.styleObject.height)/n.a/2,s=n.a*o+n.c*i+n.e,r=n.b*o+n.d*i+n.f;this.$store.commit("setBlockPosition",{data:e,position:{x:s,y:r}})}},endDrag:function(){this.canDrag=!1,this.dragData=null}},beforeDestroy:function(){this.$store.commit("clearSVG")}},ot=nt,it=(n("3f5a"),Object(P["a"])(ot,T,A,!1,null,"6044e6dc",null)),st=it.exports,rt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"default",on:{mouseenter:t.toggleMagnifierShow,mouseleave:t.toggleMagnifierShow}},[n("svg",{ref:"all",attrs:{id:"all",version:"1.1",baseProfile:"full",xmlns:"http://www.w3.org/2000/svg",width:t.props.clientWidth,height:t.props.clientHeight},on:{mousemove:t.mousemoveEvent}},[n("g",{ref:"g"},[n("TreeBlock",{attrs:{isBegin:!0,pkey:0,parentCoor:[],data:t.alldata,level:t.l}})],1)]),n("Magnifier",{directives:[{name:"show",rawName:"v-show",value:t.isMagnifierShow,expression:"isMagnifierShow"}],attrs:{mouse:t.mouse}})],1)},at=[],ct=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("g",[t.isBegin?t._e():n("path",t._b({attrs:{d:t.arrowPath}},"path",t.pathDefault,!1)),n("rect",t._b({on:{click:t.rectClick,mouseenter:function(e){return e.target!==e.currentTarget?null:t.rectMouseenter(e)},mouseleave:function(e){return e.target!==e.currentTarget?null:t.rectMouseleave(e)}}},"rect",t.styleObject,!1)),t._l(t.filtChilds,(function(e,o){return n("TreeBlock",{key:o,attrs:{pkey:o,parentCoor:t.coor,data:e,level:t.l,startPoint:t.lastPoint}})}))],2)},lt=[],ut=(n("a630"),n("a9e3"),{name:"TreeBlock",props:{data:Object,level:Number,startPoint:{type:Array,default:function(){return[0,0]}},pkey:Number,parentCoor:Array,isBegin:{type:Boolean,default:!1}},created:function(){this.$store.commit("addChildNum",{l:this.l,pkey:this.pkey,parentCoor:this.parentCoor}),this.index=this.$store.state.NumOfChilds[this.l]},data:function(){return{beginBlock:!1,defaultSpace:10,index:null,ifFocus:!1,content:"",styleDefault:{width:"20",height:"6",stroke:"black",fill:"transparent","stroke-width":"1"},pathDefault:{stroke:"#000","stroke-width":"1"},textDefault:{fill:"black","text-anchor":"middle","dominant-baseline":"middle"}}},computed:{coor:function(){var t=Array.from(this.parentCoor);return t.push(this.pkey),t},l:function(){return this.level+1},filtChilds:function(){return this.data.childs.filter((function(t){return"block"==t.type}))},connectPoint:function(){return[this.startPoint[0]+this.defaultSpace,this.index*this.defaultSpace]},lastPoint:function(){var t=this.connectPoint[0]+parseInt(this.styleDefault.width),e=this.connectPoint[1]+parseFloat(this.styleDefault.height)/2;return[t,e]},styleObject:function(){return Object.assign(this.styleDefault,{fill:this.data.mainPage?"green":"transparent",x:"".concat(this.connectPoint[0]),y:"".concat(this.connectPoint[1])})},arrowPath:function(){if("0,0"!=this.startPoint){var t="".concat(this.startPoint[0],",").concat(this.startPoint[1]),e="".concat(this.connectPoint[0],",").concat(this.connectPoint[1]+parseFloat(this.styleDefault.height)/2);return"M".concat(t," L").concat(e)}return""}},methods:{rectClick:function(){console.log("send changeSelf"),this.$bus.$emit("changeSelf"),this.$store.commit("changeSelf",this.data)},rectMouseenter:function(){this.$bus.$emit("TreeBlock:mouseenter",this.data)},rectMouseleave:function(){this.$bus.$emit("TreeBlock:mouseleave")}},destroyed:function(){this.$store.commit("reduceChildNum",this.l)}}),dt=ut,ht=(n("711f"),Object(P["a"])(dt,ct,lt,!1,null,"1640bd7d",null)),pt=ht.exports,ft=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"magnifier",style:t.positionObject},[n("svg",{ref:"svg",attrs:{version:"1.1",baseProfile:"full",xmlns:"http://www.w3.org/2000/svg",width:t.props.clientWidth,height:t.props.clientHeight,viewBox:t.viewBox}},[n("g")]),n("v-icon",{staticClass:"mouse-icon",attrs:{name:"mouse-pointer"}})],1)},mt=[],vt={props:["mouse"],data:function(){return{props:{clientHeight:null,clientWidth:null}}},watch:{},computed:{viewBox:function(){return this.mouse.length?"".concat(this.mouse[0]-10," ").concat(this.mouse[1]-10," 20 20"):"0 0 10 10"},positionObject:function(){return{height:"80px",width:"80px",left:"".concat(this.mouse[0]+50,"px"),top:"".concat(this.mouse[1]+10,"px")}}},created:function(){var t=this;window.addEventListener("resize",(function(){t.windowresizeEvent()}))},mounted:function(){var t=this;this.mag=this.$refs.mag,this.$bus.$on("all:refs",(function(e){var n=t.$refs.svg.getElementsByTagName("g")[0];n.replaceWith(e)}))},methods:{windowresizeEvent:function(){this.props.clientHeight=this.$el.clientHeight,this.props.clientWidth=this.$el.clientWidth}},beforeDestroy:function(){this.$bus.$off("all:refs")}},bt=vt,gt=(n("6814"),Object(P["a"])(bt,ft,mt,!1,null,"543ab63f",null)),wt=gt.exports,yt={components:{TreeBlock:pt,Magnifier:wt},data:function(){return{l:0,isMagnifierShow:!1,mouse:[],props:{clientHeight:null,clientWidth:null,viewBox:{"min-x":0,"min-y":0,width:null,height:null,startPoint:[0,0]}}}},watch:{},computed:{filtChilds:function(){return this.alldata.childs.filter((function(t){return"block"==t.type}))},alldata:function(){return this.$store.state.alldata}},created:function(){var t=this;window.addEventListener("resize",(function(){t.windowresizeEvent()}))},mounted:function(){},beforeUpdate:function(){},updated:function(){this.$bus.$emit("all:refs",this.$refs.g.cloneNode(!0))},methods:{windowresizeEvent:function(){this.props.clientHeight=this.$el.clientHeight,this.props.clientWidth=this.$el.clientWidth,this.props.viewBox.height=this.props.clientHeight,this.props.viewBox.width=this.props.clientWidth},mousemoveEvent:function(t){this.mouse=[t.offsetX,t.offsetY]},toggleMagnifierShow:function(){this.isMagnifierShow=!this.isMagnifierShow}}},kt=yt,xt=(n("214a"),Object(P["a"])(kt,rt,at,!1,null,"6f98d040",null)),Ot=xt.exports,$t=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"default"},[n("svg",{staticClass:"Svg",attrs:{version:"2",baseProfile:"full",xmlns:"http://www.w3.org/2000/svg",viewBox:t.viewBox}},[n("g",t._l(t.childs,(function(t,e){return n("Middle",{key:e,attrs:{data:t}})})),1)])])},jt=[],Mt={components:{Middle:et},data:function(){return{data:{},props:{clientHeight:null,clientWidth:null,viewBox:{"min-x":0,"min-y":0,width:null,height:null,startPoint:[0,0]}}}},computed:{viewBox:function(){return"0 0 ".concat(this.initViewbox[0]," ").concat(this.initViewbox[1])},initViewbox:function(){return this.$store.state.initViewbox},childs:function(){return this.data.childs}},created:function(){var t=this;window.addEventListener("resize",(function(){t.windowresizeEvent()})),this.$bus.$on("TreeBlock:mouseenter",(function(e){t.data=e})),this.$bus.$on("TreeBlock:mouseleave",(function(){}))},mounted:function(){this.windowresizeEvent()},methods:{windowresizeEvent:function(){this.props.clientHeight=this.$el.clientHeight,this.props.clientWidth=this.$el.clientWidth,this.props.viewBox.height=this.props.clientHeight,this.props.viewBox.width=this.props.clientWidth}}},Et=Mt,_t=(n("e058"),Object(P["a"])(Et,$t,jt,!1,null,"2ae4d0b8",null)),St=_t.exports,Pt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"overflow-x"},t._l(t.styles,(function(t,e){return n("StyleBlock",{key:e,attrs:{layout_style:t}})})),1)},Bt=[],It=n("5530"),Ct=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"default",class:[t.layout_style.name],domProps:{innerHTML:t._s(t.layout_style.content)},on:{click:t.changeStyle}})},Lt=[],Dt={props:["layout_style"],data:function(){return{}},created:function(){var t="";for(var e in this.layout_style.style){for(var n in t+=".".concat(this.layout_style.name," ").concat(e," {"),this.layout_style.style[e])t+="".concat(n,": ").concat(this.layout_style.style[e][n],";");t+="} "}var o=document.head||document.getElementsByTagName("head")[0],i=document.createElement("style");o.appendChild(i),i.type="text/css",i.styleSheet?i.styleSheet.cssText=t:i.appendChild(document.createTextNode(t))},computed:{},methods:{changeStyle:function(){console.log(),this.$bus.$emit("Style:change",this.layout_style)}}},Tt=Dt,At=(n("51c0"),Object(P["a"])(Tt,Ct,Lt,!1,null,"fa5ee8e8",null)),Ht=At.exports,Ft={components:{StyleBlock:Ht},created:function(){this.getBlockStyles()},data:function(){return{}},computed:Object(It["a"])({},Object(r["c"])("styles",{styles:function(t){return t.blockStyles}})),methods:Object(It["a"])({},Object(r["b"])("styles",["getBlockStyles"]))},Nt=Ft,zt=(n("8bc5"),Object(P["a"])(Nt,Pt,Bt,!1,null,"1d63546b",null)),Wt=zt.exports,Xt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"default"},[n("b-button-group",{attrs:{size:"sm"}},[n("b-button",{on:{click:t.backclickEvent}},[n("v-icon",{attrs:{name:"chevron-left"}})],1),n("b-button",{on:{click:t.saveclickEvent}},[n("v-icon",{attrs:{name:"save"}})],1)],1)],1)},Vt=[],Yt={methods:{backclickEvent:function(){this.$bus.$emit("tool:back")},saveclickEvent:function(){this.$bus.$emit("tool:save")},undoclickEvent:function(){this.$bus.$emit("tool:undo")},redoclickEvent:function(){this.$bus.$emit("tool:redo")}}},Gt=Yt,Rt=(n("40d4"),Object(P["a"])(Gt,Xt,Vt,!1,null,"606f4e70",null)),Ut=Rt.exports,qt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("quill-editor",{ref:"myQuillEditor",attrs:{options:t.editorOption},on:{blur:function(e){return t.onEditorBlur(e)},focus:function(e){return t.onEditorFocus(e)},ready:function(e){return t.onEditorReady(e)},change:t.onEditorChange},model:{value:t.content,callback:function(e){t.content=e},expression:"content"}})},Kt=[],Jt=(n("a753"),n("8096"),n("14e1"),n("953d")),Qt={components:{quillEditor:Jt["quillEditor"]},data:function(){return{content:"",focusId:null,editorOption:{placeholder:"Select a element!",modules:{toolbar:["bold","italic","underline","strike"]}}}},created:function(){var t=this;this.$bus.$on("Block:focus",(function(e,n){console.log("focus"),t.content=e,t.focusId=n})),this.$bus.$on("Block:enter",(function(e,n){console.log("enter"),t.content=e,t.focusId=n,t.editor.focus()}))},methods:{onEditorBlur:function(){},onEditorFocus:function(){},onEditorReady:function(){},onEditorChange:function(t){var e=t.html;this.editorOption.placeholder="Type something...",this.$bus.$emit("TextEditor:change",e,this.focusId)}},computed:{editor:function(){return this.$refs.myQuillEditor.quill}},mounted:function(){}},Zt=Qt,te=Object(P["a"])(Zt,qt,Kt,!1,null,null,null),ee=te.exports,ne={name:"EditFlow",components:{Main:st,All:Ot,Preview:St,Style:Wt,Tool:Ut,TextEditor:ee},created:function(){this.data=this.$store.state.alldata}},oe=ne,ie=(n("da92"),Object(P["a"])(oe,L,D,!1,null,null,null)),se=ie.exports,re=function(){var t=this,e=t.$createElement;t._self._c;return t._m(0)},ae=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("h1",[t._v("edit style modules")])])}],ce={},le=Object(P["a"])(ce,re,ae,!1,null,null,null),ue=le.exports;o["default"].use(C["a"]);var de=[{path:"/",name:"Home",component:se},{path:"/about",name:"About",component:function(){return n.e("about").then(n.bind(null,"f820"))}},{path:"/Flow",name:"Flow",component:se},{path:"/EditStyle",name:"EditStyle",component:ue}],he=new C["a"]({mode:"history",base:"/",routes:de}),pe=he;o["default"].config.productionTip=!1,new o["default"]({router:pe,store:w,render:function(t){return t(I)}}).$mount("#app")},6814:function(t,e,n){"use strict";var o=n("48fe"),i=n.n(o);i.a},"711f":function(t,e,n){"use strict";var o=n("c223"),i=n.n(o);i.a},"7e9c":function(t,e,n){},"8bc5":function(t,e,n){"use strict";var o=n("2fe2"),i=n.n(o);i.a},9869:function(t,e,n){},a47d:function(t,e,n){"use strict";var o=n("7e9c"),i=n.n(o);i.a},acc3:function(t,e,n){},b0a0:function(t,e,n){"use strict";var o=n("452c"),i=n.n(o);i.a},c223:function(t,e,n){},c2d6:function(t,e,n){"use strict";var o=n("9869"),i=n.n(o);i.a},da92:function(t,e,n){"use strict";var o=n("f9a6"),i=n.n(o);i.a},dd7f:function(t,e,n){},e058:function(t,e,n){"use strict";var o=n("29ad"),i=n.n(o);i.a},e2f9:function(t,e,n){},f9a6:function(t,e,n){}});
//# sourceMappingURL=app.28e5811a.js.map